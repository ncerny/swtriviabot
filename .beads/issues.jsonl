{"id":"swtriviabot-0a5","title":"Fix TestImageService.test_validate_image_url_convenience_function","description":"Test failure: TypeError: object MagicMock can't be used in 'await' expression - issue with async context manager","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:21.829396-06:00","updated_at":"2025-11-05T06:51:16.39512-06:00","closed_at":"2025-11-05T06:51:16.39512-06:00","labels":["test-failure","unit-test"]}
{"id":"swtriviabot-185","title":"TASK-001: Create Image Model","description":"Implement the Image dataclass in src/models/image.py with validation methods. Includes url, width, height, format, size_bytes, is_valid, validation_error fields and validate_url(), get_embed_data() methods.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T15:19:01.00155-06:00","updated_at":"2025-11-04T15:21:01.969982-06:00","closed_at":"2025-11-04T15:21:01.969982-06:00","dependencies":[{"issue_id":"swtriviabot-185","depends_on_id":"swtriviabot-qp4","type":"parent-child","created_at":"2025-11-04T15:19:15.067003-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-1cw","title":"Improve image posting logic to hide URLs","description":"Modify the image posting functionality so that image URLs are not displayed in the output. This could involve processing the markdown to replace or hide URL links for images.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-04T14:49:17.761175-06:00","updated_at":"2025-11-29T19:33:41.605953-06:00","closed_at":"2025-11-29T19:33:41.605953-06:00"}
{"id":"swtriviabot-1wn","title":"Fix TestImageService.test_validate_and_create_embed_timeout","description":"Test failure: assert 'Image took too long to load' in error message - got context manager protocol error","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:12.443921-06:00","updated_at":"2025-11-05T06:50:41.582658-06:00","closed_at":"2025-11-05T06:50:41.582658-06:00","labels":["test-failure","unit-test"]}
{"id":"swtriviabot-31i","title":"Export answers to CSV","description":"Add functionality to export trivia session answers and results to CSV format","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-29T19:28:30.925496-06:00","updated_at":"2025-11-29T19:33:41.589936-06:00","closed_at":"2025-11-29T19:33:41.589936-06:00","labels":["enhancement","export","roadmap"]}
{"id":"swtriviabot-3iu","title":"Fix TestImageService.test_validate_and_create_embed_invalid_url","description":"Test failure: assert 'Please provide a valid image URL' in error message - got GIF search error instead","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:05.321378-06:00","updated_at":"2025-11-05T07:50:36.83144-06:00","closed_at":"2025-11-05T07:50:36.83144-06:00","labels":["test-failure","unit-test"]}
{"id":"swtriviabot-3pp","title":"Scoring and leaderboards","description":"Add point scoring system and display leaderboards for trivia participants","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-29T19:28:22.461844-06:00","updated_at":"2025-11-29T19:33:41.543945-06:00","closed_at":"2025-11-29T19:33:41.543945-06:00","labels":["enhancement","roadmap","scoring"]}
{"id":"swtriviabot-3q2","title":"TASK-004: Add Unit Tests","description":"Create comprehensive unit tests for image validation and service methods in tests/unit/test_image_service.py with 90%+ coverage. Tests for valid/invalid URLs, different formats, timeout scenarios.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T15:19:07.868677-06:00","updated_at":"2025-11-04T15:21:44.482801-06:00","closed_at":"2025-11-04T15:21:44.482801-06:00","dependencies":[{"issue_id":"swtriviabot-3q2","depends_on_id":"swtriviabot-qp4","type":"parent-child","created_at":"2025-11-04T15:19:21.08341-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"swtriviabot-3q2","depends_on_id":"swtriviabot-tmy","type":"blocks","created_at":"2025-11-04T15:19:34.026227-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-40e","title":"Core Bot Features","description":"Core functionality including answer submission, question posting, and session management that is already implemented and working","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T19:28:06.741228-06:00","updated_at":"2025-11-29T19:33:41.491426-06:00","closed_at":"2025-11-29T19:33:41.491426-06:00"}
{"id":"swtriviabot-41u","title":"Fix TestImageModel.test_process_search_term_no_results - fixture 'service' not found","description":"Test error: fixture 'service' not found - need to make service fixture available to TestImageModel class","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:36.675496-06:00","updated_at":"2025-11-05T06:44:23.461949-06:00","closed_at":"2025-11-05T06:44:23.461949-06:00","labels":["fixture","test-error"]}
{"id":"swtriviabot-6dl","title":"Fix TestImageService.test_validate_and_create_embed_large_image","description":"Test failure: assert 'Image is too large' in error message - got context manager protocol error","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:18.369493-06:00","updated_at":"2025-11-05T06:50:43.29258-06:00","closed_at":"2025-11-05T06:50:43.29258-06:00","labels":["test-failure","unit-test"]}
{"id":"swtriviabot-6ed","title":"Custom emoji responses","description":"Allow customization of bot emoji responses for different events","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-29T19:28:33.623179-06:00","updated_at":"2025-11-29T19:33:41.598479-06:00","closed_at":"2025-11-29T19:33:41.598479-06:00","labels":["enhancement","roadmap","ui"]}
{"id":"swtriviabot-7of","title":"Answer reveal command","description":"Add command to reveal correct answers and highlight participant responses","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-29T19:28:36.230717-06:00","updated_at":"2025-11-29T19:33:41.570608-06:00","closed_at":"2025-11-29T19:33:41.570608-06:00","labels":["admin","enhancement","roadmap"]}
{"id":"swtriviabot-87e","title":"TASK-005: Add Integration Tests","description":"Create integration tests for end-to-end image posting workflow in tests/integration/test_image_hiding.py. Tests for successful image posting without URL display and error handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T15:19:09.917884-06:00","updated_at":"2025-11-04T15:21:59.209355-06:00","closed_at":"2025-11-04T15:21:59.209355-06:00","dependencies":[{"issue_id":"swtriviabot-87e","depends_on_id":"swtriviabot-qp4","type":"parent-child","created_at":"2025-11-04T15:19:24.685687-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"swtriviabot-87e","depends_on_id":"swtriviabot-eaj","type":"blocks","created_at":"2025-11-04T15:19:36.166011-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-8c0","title":"Fix TestImageModel.test_process_search_term_no_api_key - fixture 'service' not found","description":"Test error: fixture 'service' not found - need to make service fixture available to TestImageModel class","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:28.082563-06:00","updated_at":"2025-11-05T06:44:20.125939-06:00","closed_at":"2025-11-05T06:44:20.125939-06:00","labels":["fixture","test-error"]}
{"id":"swtriviabot-8rj","title":"TASK-006: Update Documentation","description":"Update project documentation to reflect new image handling capabilities. Update README.md, API documentation, code comments, and CHANGELOG.md entry for the feature.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T15:19:11.896194-06:00","updated_at":"2025-11-04T15:22:23.232971-06:00","closed_at":"2025-11-04T15:22:23.232971-06:00","dependencies":[{"issue_id":"swtriviabot-8rj","depends_on_id":"swtriviabot-qp4","type":"parent-child","created_at":"2025-11-04T15:19:27.151521-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"swtriviabot-8rj","depends_on_id":"swtriviabot-eaj","type":"blocks","created_at":"2025-11-04T15:19:38.204393-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-921","title":"Add interactive GIF selection from multiple Tenor results","description":"Instead of auto-selecting the first Tenor GIF result, show multiple options (3-5) and let users select via reactions or buttons which GIF to use in their trivia question.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-04T15:34:41.813466-06:00","updated_at":"2025-11-04T15:39:14.008863-06:00","closed_at":"2025-11-04T15:39:14.008863-06:00"}
{"id":"swtriviabot-bjw","title":"Fix TestImageService.test_validate_and_create_embed_http_error","description":"Test failure: assert 'Image not found (404)' in error message - got context manager protocol error","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:10.912292-06:00","updated_at":"2025-11-05T06:50:30.616119-06:00","closed_at":"2025-11-05T06:50:30.616119-06:00","labels":["test-failure","unit-test"]}
{"id":"swtriviabot-coh","title":"Test issue","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T14:43:17.410087-06:00","updated_at":"2025-11-29T19:33:41.614517-06:00","closed_at":"2025-11-29T19:33:41.614517-06:00"}
{"id":"swtriviabot-d4b","title":"Timed questions with auto-close","description":"Add time limits to questions that automatically close submissions after a set period","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-29T19:28:25.205772-06:00","updated_at":"2025-11-29T19:33:41.56023-06:00","closed_at":"2025-11-29T19:33:41.56023-06:00","labels":["enhancement","roadmap","timing"]}
{"id":"swtriviabot-eaj","title":"TASK-003: Modify Post Question Command","description":"Update src/commands/post_question.py to use image service for URL hiding. Import and use ImageService, replace direct image posting with embed creation, maintain backward compatibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T15:19:05.647462-06:00","updated_at":"2025-11-04T15:21:31.483557-06:00","closed_at":"2025-11-04T15:21:31.483557-06:00","dependencies":[{"issue_id":"swtriviabot-eaj","depends_on_id":"swtriviabot-qp4","type":"parent-child","created_at":"2025-11-04T15:19:19.136051-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"swtriviabot-eaj","depends_on_id":"swtriviabot-tmy","type":"blocks","created_at":"2025-11-04T15:19:32.101446-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-emm","title":"Image Posting System Improvements \u0026 Bug Fixes","description":"## Summary of Improvements Made\n\n### âœ… **Fixed Duplicate \"Yesterday's Answer\" Issue**\n- **Problem**: Bot was sending yesterday's answer twice - once in a separate message and again in the main question message\n- **Solution**: Removed the separate yesterday results message, keeping all information consolidated in the main question message\n- **Result**: Clean, single message with yesterday's results + today's question + answer button\n\n### âœ… **Enhanced Image Detection \u0026 Processing**\n- **Problem**: Tenor URLs posted as plain text weren't being processed correctly\n- **Solution**: Added logic to detect and properly resolve Tenor URLs in text messages using `_resolve_tenor_url()`\n- **Result**: All image types now work: Discord embeds, uploaded attachments, direct image URLs, and Tenor URLs in text\n\n### âœ… **Removed Redundant Instruction Text**\n- **Problem**: \"Please click the button below to submit your answer!\" was cluttering the interface\n- **Solution**: Removed instruction text entirely - the button is self-explanatory\n- **Result**: Clean interface with just the essential information\n\n### âœ… **Improved Permissions \u0026 Error Handling**\n- **Problem**: Permissions checking wasn't comprehensive\n- **Solution**: Updated permissions check to include Manage Messages (optional) and clearer error messages\n- **Result**: Better user guidance when bot lacks required permissions\n\n### âœ… **Added Debug Logging**\n- **Problem**: Hard to diagnose image processing failures\n- **Solution**: Added detailed debug logging for message detection, URL processing, and embed creation\n- **Result**: Easier troubleshooting of edge cases with different image types\n\n## Technical Implementation Details\n\n**Files Modified:**\n- `src/commands/post_question.py` - Main logic improvements\n- `tests/integration/test_image_hiding.py` - Updated tests\n\n**Key Features:**\n- Single comprehensive message (question + yesterday's results)\n- Robust image detection (embeds, attachments, URLs)\n- Tenor GIF support (both embeds and text URLs)\n- Automatic message cleanup\n- Debug logging for troubleshooting\n\n**Status: COMPLETED** - All improvements tested and working correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T19:24:54.24139-06:00","updated_at":"2025-11-04T19:24:56.358355-06:00","closed_at":"2025-11-04T19:24:56.358355-06:00","labels":["bugfix","enhancement"],"dependencies":[{"issue_id":"swtriviabot-emm","depends_on_id":"swtriviabot-qp4","type":"blocks","created_at":"2025-11-04T19:24:54.244671-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-eup","title":"Monitor and cap bot resource usage","description":"Track container memory and file descriptor usage, identify leaks in session caches or embeds, and implement limits/cleanup so the bot stays within host resources.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-10T12:30:24.090243-06:00","updated_at":"2025-11-29T19:34:58.603669-06:00","closed_at":"2025-11-29T19:34:58.603669-06:00"}
{"id":"swtriviabot-ggz","title":"Investigate event loop blocking in slash command handlers","description":"Instrument slash command execution to detect blocking operations, add timeouts to external API calls, and refactor any blocking work off the main loop so Discord interactions are acknowledged within 3 seconds.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-10T12:27:42.07371-06:00","updated_at":"2025-11-29T19:34:58.618911-06:00","closed_at":"2025-11-29T19:34:58.618911-06:00"}
{"id":"swtriviabot-gm8","title":"Question categories","description":"Add categorization system for questions (e.g., Science, History, Sports)","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-29T19:28:28.157223-06:00","updated_at":"2025-11-29T19:33:41.580731-06:00","closed_at":"2025-11-29T19:33:41.580731-06:00","labels":["categories","enhancement","roadmap"]}
{"id":"swtriviabot-iag","title":"Add Tenor GIF search integration","description":"Integrate Tenor API to allow users to search for GIFs by typing search terms instead of URLs. Detect input type (URL vs search term) and handle both cases seamlessly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-04T15:30:34.631733-06:00","updated_at":"2025-11-04T15:31:41.890546-06:00","closed_at":"2025-11-04T15:31:41.890546-06:00"}
{"id":"swtriviabot-mc7","title":"Fix TestImageModel.test_process_search_term_success - fixture 'service' not found","description":"Test error: fixture 'service' not found - need to make service fixture available to TestImageModel class","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:23.279815-06:00","updated_at":"2025-11-05T06:44:18.538148-06:00","closed_at":"2025-11-05T06:44:18.538148-06:00","labels":["fixture","test-error"]}
{"id":"swtriviabot-mka","title":"Fix TestImageService.test_validate_and_create_embed_unsupported_format","description":"Test failure: assert 'Unsupported image format' in error message - got context manager protocol error","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:19.688459-06:00","updated_at":"2025-11-05T06:50:45.097111-06:00","closed_at":"2025-11-05T06:50:45.097111-06:00","labels":["test-failure","unit-test"]}
{"id":"swtriviabot-osv","title":"Harden slash command error handling for interaction failures","description":"Audit command handlers for unhandled exceptions, add targeted exception handling around followup/defer calls, and ensure we surface errors to admins instead of letting interactions expire silently.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-10T12:28:18.072017-06:00","updated_at":"2025-11-29T19:34:58.611582-06:00","closed_at":"2025-11-29T19:34:58.611582-06:00"}
{"id":"swtriviabot-pt1","title":"Improve image URL validation error messages","description":"Current error messages are too technical. Users get 'Invalid content type: text/html' when trying to post webpage links instead of direct image URLs. Need more user-friendly messages that guide them to provide direct image links.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-04T15:24:44.692761-06:00","updated_at":"2025-11-04T15:26:46.829351-06:00","closed_at":"2025-11-04T15:26:46.829351-06:00"}
{"id":"swtriviabot-qp4","title":"Implement hide image URLs feature","description":"ðŸŽ¯ **COMPLETED**: Implemented follow-up message image detection system\n\n**Investigation Results:**\n- Original URL hiding approach failed because Discord's Tenor GIF picker creates webpage links (text/html) instead of direct images\n- Users experienced \"Invalid content type: text/html\" errors when trying to use Discord's native GIF picker\n\n**Final Solution:**\n- Removed image URL field from modal completely\n- Implemented follow-up message detection: user posts question, then immediately posts image/GIF\n- Bot automatically detects the image, deletes user's message, and re-posts image as bot\n- 15-second timeout with graceful fallback\n\n**Technical Implementation:**\n- `_wait_for_image_attachment()` detects Discord embeds, Tenor GIFs, and uploaded images\n- Always deletes user's image message to prevent duplication\n- Posts question text, then separate image message from bot\n- Works with all Discord image features (GIF picker, uploads, links)\n\n**Benefits:**\nâœ… Zero modal complexity - natural Discord workflow\nâœ… Works with Discord's native GIF picker (Tenor integration)\nâœ… Clean chat appearance - no URL clutter or duplicates\nâœ… Images appear \"as the bot\" in separate messages\nâœ… Automatic cleanup prevents message spam\n\n**Status: RESOLVED** - Image posting now works seamlessly with Discord's native features.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-04T15:01:26.339723-06:00","updated_at":"2025-11-04T15:59:23.383321-06:00","closed_at":"2025-11-04T15:59:14.888306-06:00","dependencies":[{"issue_id":"swtriviabot-qp4","depends_on_id":"swtriviabot-1cw","type":"related","created_at":"2025-11-04T15:01:28.102903-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-teo","title":"Increase test coverage to 80%","description":"Current test coverage is 69.34%, which is below the required 80% threshold. Need to add tests for uncovered code, prioritizing modules with lowest coverage.","acceptance_criteria":"- Overall test coverage \u003e= 80%\n- All tests passing\n- Focus on lowest coverage modules first","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-05T07:50:42.884561-06:00","updated_at":"2025-11-11T07:51:46.30165-06:00","closed_at":"2025-11-11T07:51:46.30165-06:00","labels":["coverage","testing"]}
{"id":"swtriviabot-tmy","title":"TASK-002: Implement Image Service","description":"Create src/services/image_service.py with async image validation and embed creation. ImageService class with validate_and_create_embed() method using aiohttp for async HTTP validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-04T15:19:03.380209-06:00","updated_at":"2025-11-04T15:21:12.05134-06:00","closed_at":"2025-11-04T15:21:12.05134-06:00","dependencies":[{"issue_id":"swtriviabot-tmy","depends_on_id":"swtriviabot-qp4","type":"parent-child","created_at":"2025-11-04T15:19:17.011485-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"swtriviabot-tmy","depends_on_id":"swtriviabot-185","type":"blocks","created_at":"2025-11-04T15:19:30.096137-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"swtriviabot-txs","title":"Future Enhancements","description":"Roadmap items for new features and improvements from the README","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T19:28:09.305939-06:00","updated_at":"2025-11-29T19:33:41.500165-06:00","closed_at":"2025-11-29T19:33:41.500165-06:00"}
{"id":"swtriviabot-ugu","title":"Fix TestImageHidingIntegration.test_post_question_with_invalid_image","description":"Test failure: assert None is not None - Error message was not sent as expected","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-05T06:43:03.781456-06:00","updated_at":"2025-11-05T06:47:14.745501-06:00","closed_at":"2025-11-05T06:47:14.745501-06:00","labels":["integration-test","test-failure"]}
{"id":"swtriviabot-w8o","title":"Infrastructure \u0026 DevOps","description":"Development tools, deployment, testing infrastructure, and operational improvements","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-29T19:28:12.446883-06:00","updated_at":"2025-11-29T19:33:41.507901-06:00","closed_at":"2025-11-29T19:33:41.507901-06:00"}
{"id":"swtriviabot-ws9","title":"Update CLAUDE.md with Beads workflow","description":"Update the CLAUDE.md file to include guidance on using Beads for issue tracking and project management","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T19:28:39.67435-06:00","updated_at":"2025-11-29T19:29:39.518785-06:00","closed_at":"2025-11-29T19:29:39.518785-06:00","labels":["beads","documentation"]}
{"id":"swtriviabot-xm3","title":"Multiple questions per session","description":"Allow multiple trivia questions to be active in a single session instead of one at a time","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-29T19:28:19.649564-06:00","updated_at":"2025-11-29T19:33:41.519731-06:00","closed_at":"2025-11-29T19:33:41.519731-06:00","labels":["enhancement","roadmap"]}
